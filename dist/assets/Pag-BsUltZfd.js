import{g as wt,a as Ct,r as f,i as Tt,y as Et,z as jt,A as vt,C as zt,D as It,c as F,s as M,k as V,j as e,e as kt,l as Pt,E as q,h as H,o as u,F as Dt,G as Rt,P as Nt,T as At,I as Ot,q as Wt,t as Ft,H as Lt,J,_ as $t,v as Mt,L as Ht,K as Q,M as Y,O as bt,N as X,Q as Z}from"./index-BBAlZ0n6.js";import{T as _t,S as Ut,a as Gt}from"./StatusDialog-qvx6GkSM.js";function Kt(t){return wt("MuiCollapse",t)}Ct("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Bt=t=>{const{orientation:s,classes:i}=t,o={root:["root",`${s}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${s}`],wrapperInner:["wrapperInner",`${s}`]};return kt(o,Kt,i)},Vt=M("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:i}=t;return[s.root,s[i.orientation],i.state==="entered"&&s.entered,i.state==="exited"&&!i.in&&i.collapsedSize==="0px"&&s.hidden]}})(Pt(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:s})=>s.state==="exited"&&!s.in&&s.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),qt=M("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Jt=M("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),$=f.forwardRef(function(s,i){const o=Tt({props:s,name:"MuiCollapse"}),{addEndListener:m,children:T,className:S,collapsedSize:d="0px",component:h,easing:y,in:w,onEnter:I,onEntered:k,onEntering:a,onExit:b,onExited:et,onExiting:_,orientation:U="vertical",slots:st={},slotProps:nt={},style:N,timeout:x=Et.standard,TransitionComponent:it=jt,...at}=o,E={...o,orientation:U,collapsedSize:d},j=Bt(E),G=vt(),ot=zt(),g=f.useRef(null),A=f.useRef(),P=typeof d=="number"?`${d}px`:d,v=U==="horizontal",z=v?"width":"height",D=f.useRef(null),rt=It(i,D),C=n=>r=>{if(n){const l=D.current;r===void 0?n(l):n(l,r)}},O=()=>g.current?g.current[v?"clientWidth":"clientHeight"]:0,lt=C((n,r)=>{g.current&&v&&(g.current.style.position="absolute"),n.style[z]=P,I&&I(n,r)}),ct=C((n,r)=>{const l=O();g.current&&v&&(g.current.style.position="");const{duration:c,easing:R}=q({style:N,timeout:x,easing:y},{mode:"enter"});if(x==="auto"){const B=G.transitions.getAutoHeightDuration(l);n.style.transitionDuration=`${B}ms`,A.current=B}else n.style.transitionDuration=typeof c=="string"?c:`${c}ms`;n.style[z]=`${l}px`,n.style.transitionTimingFunction=R,a&&a(n,r)}),pt=C((n,r)=>{n.style[z]="auto",k&&k(n,r)}),dt=C(n=>{n.style[z]=`${O()}px`,b&&b(n)}),ut=C(et),ht=C(n=>{const r=O(),{duration:l,easing:c}=q({style:N,timeout:x,easing:y},{mode:"exit"});if(x==="auto"){const R=G.transitions.getAutoHeightDuration(r);n.style.transitionDuration=`${R}ms`,A.current=R}else n.style.transitionDuration=typeof l=="string"?l:`${l}ms`;n.style[z]=P,n.style.transitionTimingFunction=c,_&&_(n)}),xt=n=>{x==="auto"&&ot.start(A.current||0,n),m&&m(D.current,n)},W={slots:st,slotProps:nt,component:h},[gt,K]=F("root",{ref:rt,className:V(j.root,S),elementType:Vt,externalForwardedProps:W,ownerState:E,additionalProps:{style:{[v?"minWidth":"minHeight"]:P,...N}}}),[ft,mt]=F("wrapper",{ref:g,className:j.wrapper,elementType:qt,externalForwardedProps:W,ownerState:E}),[St,yt]=F("wrapperInner",{className:j.wrapperInner,elementType:Jt,externalForwardedProps:W,ownerState:E});return e.jsx(it,{in:w,onEnter:lt,onEntered:pt,onEntering:ct,onExit:dt,onExited:ut,onExiting:ht,addEndListener:xt,nodeRef:D,timeout:x==="auto"?null:x,...at,children:(n,{ownerState:r,...l})=>{const c={...E,state:n};return e.jsx(gt,{...K,className:V(K.className,{entered:j.entered,exited:!w&&P==="0px"&&j.hidden}[n]),ownerState:c,...l,children:e.jsx(ft,{...mt,ownerState:c,children:e.jsx(St,{...yt,ownerState:c,children:T})})})}})});$&&($.muiSupportAuto=!0);const Qt=H(e.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),Yt=H(e.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),Xt=H(e.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 12H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"})),L=({title:t,children:s})=>e.jsxs(u,{sx:Zt,children:[e.jsx(u,{sx:te,children:t}),e.jsx(u,{sx:ee,children:s})]}),Zt={display:"flex",alignItems:"center",gap:2},te={flex:.2,fontWeight:500,fontSize:14,opacity:.8},ee={display:"flex",flex:1},se={state:{selected:null},getters:{},actions:{async fetch(t,s){const i=(await s.api.get(t))?.task;s.setSelected(i)},new(t,s){const i={title:"",description:"",status:_t.PENDING};s.setSelected(i)},async save(t,s){if(!s.state.selected)return;const i=(await s.api.save(s.state.selected))?.task;s.setSelected(i)}},mutators:{setSelected:t=>({selected:t})}},p=Dt(se);p.api=Rt;const ne=({id:t,title:s,icon:i,collapsible:o=!1,defaultExpanded:m=!0,titleEndRender:T,children:S,sx:d})=>{const[h,y]=f.useState(m),w=()=>{o&&y(!h)};return e.jsxs(Nt,{id:t,sx:[ie,d],children:[!!s&&e.jsxs(u,{sx:ae,children:[e.jsxs(u,{sx:oe,children:[i,e.jsx(At,{variant:"h6",children:s})]}),T,o&&e.jsx(u,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(Ot,{size:"small",onClick:w,children:h?e.jsx(Qt,{fontSize:"small"}):e.jsx(Yt,{fontSize:"small"})})})]}),e.jsx($,{in:!o||h,unmountOnExit:o,children:e.jsx(u,{sx:re,children:S})})]})},ie={borderRadius:3,px:3,py:2,display:"flex",flexDirection:"column",gap:2},ae={position:"sticky",top:0,bgcolor:"background.paper",zIndex:1,display:"flex",alignItems:"center",gap:2},oe={flex:1,display:"flex",alignItems:"center",gap:1.5},re={display:"flex",flexDirection:"column",gap:1},ue=()=>{Wt(p);const t=p.state.selected,s=Ft();let{id:i}=Lt();const o=J(t?.title,[tt]),m=J(t?.description,[tt]),[T,S]=f.useState(!1);f.useEffect(()=>{if($t(),Mt.setCurrent(Ht.TASK),i==="new"||!i){p.new();return}p.fetch(i)},[i]);const d=a=>{p.setSelected({...t,title:a})},h=a=>{p.setSelected({...t,description:a})},y=async()=>{if(bt().length>0)return X.dialogOpen({type:Z.WARNING,labelCancel:null,text:"Please fix the errors before saving the task."}),!1;await p.save(),s("/app/tasks/"),X.dialogOpen({type:Z.INFO,text:"Task has been saved successfully."})},w=()=>{s("/app/tasks/")},I=a=>{S(!1),a!=null&&p.setSelected({...t,status:a})};if(!t)return null;const k=!t.id;return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{sx:le,icon:e.jsx(Xt,{}),title:k?"NEW TASK":"EDIT TASK",children:[e.jsx(L,{title:"STATUS",children:e.jsx(Ut,{status:t.status,onClick:()=>S(!0)})}),e.jsx(L,{title:"TITLE",children:e.jsx(Q,{autoFocus:!0,placeholder:"Write a short title",value:t?.title??"",onChange:a=>d(a.target.value),...o})}),e.jsx(L,{title:"DESCRIPTION",children:e.jsx(Q,{placeholder:"Write a task description",value:t?.description??"",onChange:a=>h(a.target.value),multiline:!0,rows:5,...m})}),e.jsxs(u,{sx:ce,children:[e.jsx(Y,{onClick:w,children:"CANCEL"}),e.jsx(Y,{variant:"contained",onClick:y,children:"SAVE"})]})]}),e.jsx(Gt,{isOpen:T,status:t.status,onClose:I})]})},le={mt:4,boxShadow:5,width:"100%",maxWidth:"800px"},ce={p:2,display:"flex",justifyContent:"flex-end",gap:2},tt=t=>!t||t.trim()===""?"This field is required":null;export{ue as default};
//# sourceMappingURL=Pag-BsUltZfd.js.map
